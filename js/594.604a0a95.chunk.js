"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[594],{3583:(n,t,i)=>{i.d(t,{A:()=>e});i(65043);const e=i.p+"static/media/marketika defullt.7ba899dccbc85f4ffaadd4300f6c1069.svg"},10911:(n,t,i)=>{i.d(t,{Ar:()=>p,Ev:()=>u,eq:()=>m,nA:()=>x});var e,a,o,r,l,d=i(57528),s=i(1529);const c=(0,s.i7)(e||(e=(0,d.A)(["\n  from { opacity: 0; }\n  to { opacity: 1; }\n"]))),u=s.Ay.div(a||(a=(0,d.A)(["\n  display: grid;\n  gap: 1rem;\n  grid-template-columns: repeat( auto-fit, minmax(580px, 1fr) );\n  width:100%;\n  padding:1vw;\n  background:linear-gradient(to top, #52575D10, transparent);\n  @media (max-width: 768px) {\npadding:0;\ngrid-template-columns: 1fr;\nwidth:100vw;\ngap: 0;\n\n  }\n"]))),x=s.Ay.div(o||(o=(0,d.A)(["\n  border-radius: 10px;\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\n  animation: ",' 0.5s ease-out;\n  height:max-content;\n  padding: .5rem .5rem;\n  width:100%;\n  height:max-content;\n\n\n  *{\n  font-family: "yekan";\n  }\n\n  @media (max-width: 1050px) {\n  border:none;\n\n  }\n\n@media (max-width: 768px) {\n  width:100vw;\n  padding: 0;\n\n  }\n\n'])),c),p=s.Ay.div(r||(r=(0,d.A)(["\n  width:max-content;\n  display:flex;\n  height: 100%;\n  align-items:center;\n  justify-content:center;\n  gap:5px;\n\n  @media (max-width: 768px) {\n  grid-template-rows: 1fr;\n  grid-template-columns: 1fr 1fr;\n\n  }\n\n"]))),m=s.Ay.div(l||(l=(0,d.A)(["\n  width:100%;\n  display:flex;\n  height: 100%;\n  flex-wrap:wrap;\n  align-items:center;\n  justify-content:center;\n  gap:5px;\n  padding:5px;\n\n  @media (max-width: 768px) {\n  display:grid;\n  grid-template-rows: 1fr;\n  grid-template-columns: 1fr 1fr;\n    padding:5px;\n  }\n\n"])))},20326:(n,t,i)=>{i.d(t,{A:()=>U});var e=i(89379),a=i(65043),o=i(26240),r=i(54552),l=i(43845),d=i(2828),s=i(78185),c=i(26494),u=i(77739),x=i(17392),p=i(94496),m=i(36591),v=i(30815),h=i(15244),f=i(77466),g=i(51387),A=i(48920),y=i(70141),b=i(99010),w=i(3583),j=i(73216),C=i(33943),k=i(83003),q=i(84589),I=i(40884),S=i(70579);const z=n=>{const t="number"===typeof n?n:parseFloat(n)||0;return new Intl.NumberFormat("fa-IR").format(t)+" \u062a\u0648\u0645\u0627\u0646"},D=n=>{var t,i,D,U,Y,$;let{product:J,loading:K,ClassName:Q}=n;const V=(0,k.wA)(),X=(0,j.Zp)(),nn=(0,o.A)(),tn=(0,r.A)(nn.breakpoints.down("sm")),{user:en,token:an}=(0,k.d4)((n=>n.auth)),on=(0,k.d4)(I.selectCartItems),rn=(0,k.d4)((n=>n.cart.cartLoadingStates[null===J||void 0===J?void 0:J._id]||!1)),[ln,dn]=((0,k.d4)((n=>n.products.loadingStates[null===J||void 0===J?void 0:J._id]||!1)),(0,a.useState)(!1)),[sn,cn]=(0,a.useState)(!1),[un,xn]=(0,a.useState)({isInCart:!1,quantity:0,item:null}),pn=(null===J||void 0===J||null===(t=J.likes)||void 0===t?void 0:t.includes(null===en||void 0===en?void 0:en.id))||!1,mn=(null===J||void 0===J||null===(i=J.likes)||void 0===i?void 0:i.length)||0,vn=parseFloat((null===J||void 0===J||null===(D=J.price)||void 0===D?void 0:D.$numberDecimal)||(null===J||void 0===J?void 0:J.price)||0);(0,a.useEffect)((()=>{const n=on.find((n=>{var t;return(null===n||void 0===n||null===(t=n.product)||void 0===t?void 0:t._id)===(null===J||void 0===J?void 0:J._id)}));xn({isInCart:!!n,quantity:(null===n||void 0===n?void 0:n.quantity)||0,item:n||null})}),[on,null===J||void 0===J?void 0:J._id]);const hn=(0,a.useCallback)((async n=>{if(n.stopPropagation(),cn(!0),an){try{await V((0,q.GB)({productId:null===J||void 0===J?void 0:J._id,userId:null===en||void 0===en?void 0:en.id,isCurrentlyLiked:pn})).unwrap()}catch(t){console.error("\u062e\u0637\u0627 \u062f\u0631 \u0639\u0645\u0644\u06cc\u0627\u062a \u0644\u0627\u06cc\u06a9:",t)}cn(!1)}else X("/auth")}),[null===J||void 0===J?void 0:J._id,null===en||void 0===en?void 0:en.id,an,X,pn,V]),fn=(0,a.useCallback)((async n=>{if(n.stopPropagation(),n.preventDefault(),!an)return X("/auth");if(!rn){xn((n=>({isInCart:!0,quantity:n.quantity+1,item:n.item||{_id:"temp-".concat(Date.now()),product:J,quantity:n.quantity+1,priceAtAddition:vn}})));try{await V((0,I.addItemToCart)({userId:null===en||void 0===en?void 0:en.id,productId:null===J||void 0===J?void 0:J._id,quantity:1})).unwrap()}catch(t){xn((n=>(0,e.A)((0,e.A)({},n),{},{isInCart:n.quantity>0,quantity:Math.max(0,n.quantity),item:n.quantity>0?n.item:null}))),console.error("\u062e\u0637\u0627 \u062f\u0631 \u0627\u0641\u0632\u0648\u062f\u0646 \u0628\u0647 \u0633\u0628\u062f \u062e\u0631\u06cc\u062f:",t)}}}),[J,null===en||void 0===en?void 0:en.id,an,X,V,rn,vn]),gn=(0,a.useCallback)((async n=>{if(n.stopPropagation(),n.preventDefault(),an&&!rn){xn((n=>(0,e.A)((0,e.A)({},n),{},{quantity:Math.max(0,n.quantity-1),isInCart:n.quantity>1})));try{await V((0,I.addItemToCart)({userId:null===en||void 0===en?void 0:en.id,productId:null===J||void 0===J?void 0:J._id,quantity:-1})).unwrap()}catch(t){xn((n=>(0,e.A)((0,e.A)({},n),{},{quantity:n.quantity+1,isInCart:!0}))),console.error("\u062e\u0637\u0627 \u062f\u0631 \u06a9\u0627\u0647\u0634 \u062a\u0639\u062f\u0627\u062f \u0645\u062d\u0635\u0648\u0644:",t)}}}),[null===J||void 0===J?void 0:J._id,null===en||void 0===en?void 0:en.id,an,V,rn]),An=(0,a.useCallback)((async n=>{if(n.stopPropagation(),n.preventDefault(),an&&!rn&&un.item){xn({isInCart:!1,quantity:0,item:null});try{await V((0,I.removeItemFromCart)(un.item._id)).unwrap()}catch(t){xn({isInCart:!0,quantity:un.quantity,item:un.item}),console.error("\u062e\u0637\u0627 \u062f\u0631 \u062d\u0630\u0641 \u0645\u062d\u0635\u0648\u0644:",t)}}}),[un,V,rn,an]),yn=(0,a.useCallback)((()=>{const n=parseInt((null===J||void 0===J?void 0:J.stock)||0);return n<=0?(0,S.jsx)(l.A,{label:"\u0646\u0627\u0645\u0648\u062c\u0648\u062f",size:"small",color:"error",sx:{mr:1,mb:1}}):n<5?(0,S.jsx)(l.A,{label:"\u062a\u0646\u0647\u0627 ".concat(n," \u0639\u062f\u062f \u0628\u0627\u0642\u06cc \u0645\u0627\u0646\u062f\u0647"),size:"small",color:"warning",sx:{mr:1,mb:1}}):null}),[null===J||void 0===J?void 0:J.stock]),bn=(0,a.useCallback)((()=>dn(!0)),[]),wn=(0,a.useCallback)((()=>{X("/productPage/".concat(null===J||void 0===J?void 0:J._id))}),[null===J||void 0===J?void 0:J._id,X]);if(K)return(0,S.jsxs)(d.A,{className:"card ".concat(Q),sx:_,children:[(0,S.jsx)(s.A,{variant:"rectangular",height:200}),(0,S.jsxs)(c.A,{children:[(0,S.jsx)(s.A,{variant:"text",width:"60%"}),(0,S.jsx)(s.A,{variant:"text"}),(0,S.jsx)(s.A,{variant:"text",width:"40%"})]})]});const jn=un.item?un.item.priceAtAddition*un.quantity:vn*un.quantity;return(0,S.jsxs)(d.A,{className:"Card ".concat(Q),sx:N,onClick:wn,children:[(0,S.jsx)(u.A,{title:pn?"\u062d\u0630\u0641 \u0627\u0632 \u0639\u0644\u0627\u0642\u0647\u200c\u0645\u0646\u062f\u06cc\u200c\u0647\u0627":"\u0627\u0641\u0632\u0648\u062f\u0646 \u0628\u0647 \u0639\u0644\u0627\u0642\u0647\u200c\u0645\u0646\u062f\u06cc\u200c\u0647\u0627",children:(0,S.jsxs)(x.A,{"aria-label":"toggle favorite",onClick:hn,sx:R,children:[(0,S.jsx)(p.A,{variant:"body2",component:"div",sx:{ml:.5},children:mn}),pn?(0,S.jsx)(h.A,{sx:W(sn)}):(0,S.jsx)(f.A,{})]})}),(0,S.jsx)(d.A,{className:"img",sx:L,children:(0,S.jsx)(m.A,{component:"img",height:tn?"150px":"200px",src:ln?w.A:"".concat(C.T,"/").concat(null===J||void 0===J||null===(U=J.images)||void 0===U?void 0:U[0]),alt:null===J||void 0===J?void 0:J.name,sx:M,onError:bn,placeholder:"blur",loading:"lazy"})}),(0,S.jsxs)(c.A,{sx:P,children:[(0,S.jsx)(p.A,{variant:"body2",component:"div",sx:E,children:(null===J||void 0===J?void 0:J.name)||"\u0628\u062f\u0648\u0646 \u0639\u0646\u0648\u0627\u0646"}),(0,S.jsxs)(v.A,{sx:{mt:1},children:[yn(),(0,S.jsx)(l.A,{label:"".concat((null===J||void 0===J||null===(Y=J.category)||void 0===Y?void 0:Y.name)||"\u0628\u062f\u0648\u0646 \u062f\u0633\u062a\u0647\u200c\u0628\u0646\u062f\u06cc"),size:"small",sx:{mr:1,mb:1}}),(0,S.jsx)(l.A,{label:"".concat((null===J||void 0===J||null===($=J.subCategory)||void 0===$?void 0:$.name)||"\u0628\u062f\u0648\u0646 \u062f\u0633\u062a\u0647\u200c\u0628\u0646\u062f\u06cc"),size:"small",sx:{mr:1,mb:1}})]}),(0,S.jsxs)(v.A,{sx:F,children:[(0,S.jsx)(p.A,{variant:"body2",sx:B,children:z(vn)}),un.isInCart?(0,S.jsxs)(v.A,{sx:T,children:[(0,S.jsx)(x.A,{"aria-label":"\u062d\u0630\u0641 \u0645\u062d\u0635\u0648\u0644",onClick:An,disabled:rn,size:"small",sx:G,children:(0,S.jsx)(g.A,{fontSize:"small"})}),(0,S.jsx)(x.A,{"aria-label":"\u06a9\u0627\u0647\u0634 \u062a\u0639\u062f\u0627\u062f",onClick:gn,disabled:rn||un.quantity<=1,size:"small",sx:G,children:(0,S.jsx)(A.A,{fontSize:"small"})}),(0,S.jsx)(p.A,{variant:"body2",sx:O,children:un.quantity}),(0,S.jsx)(x.A,{"aria-label":"\u0627\u0641\u0632\u0627\u06cc\u0634 \u062a\u0639\u062f\u0627\u062f",onClick:fn,disabled:rn,size:"small",sx:G,children:(0,S.jsx)(y.A,{fontSize:"small"})})]}):(0,S.jsx)(u.A,{title:"\u0627\u0641\u0632\u0648\u062f\u0646 \u0628\u0647 \u0633\u0628\u062f \u062e\u0631\u06cc\u062f",children:(0,S.jsx)(x.A,{"aria-label":"\u0627\u0641\u0632\u0648\u062f\u0646 \u0628\u0647 \u0633\u0628\u062f \u062e\u0631\u06cc\u062f",onClick:fn,disabled:rn,sx:H,children:(0,S.jsx)(b.A,{fontSize:"medium",sx:{padding:"2px"}})})}),un.isInCart&&(0,S.jsx)(p.A,{variant:"body2",sx:Z,children:z(jn)})]})]})]})},_={position:"relative",height:400,width:250,borderRadius:"0px"},N={position:"relative",maxHeight:"max-content",boxShadow:"none",padding:"5px",display:"flex",width:{xs:"100%",sm:"250px"},flexDirection:"column",transition:"transform 0.2s, box-shadow 0.2s","&:hover":{transform:"translateY(-4px)",background:"#52575D",">:nth-child(3)":{"*":{color:"#fff"}}}},R={position:"absolute",top:1,right:1,zIndex:1,color:"#fff",display:"flex",alignItems:"center",padding:"5px 10px",background:"#52575D",borderRadius:"5px"},W=n=>({transform:n?"scale(1.1)":"scale(1)",transition:".5s ease",color:n?"#ff4081":"inherit"}),L={background:"#fff",borderRadius:"8px"},M={objectFit:"contain",padding:"5px"},P={flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"space-between",padding:"5px",width:"100%"},E={mb:1,fontWeight:600,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:1,WebkitBoxOrient:"vertical"},F={mt:2,display:"flex",flexDirection:"column"},B={p:1,color:"#52575D",fontWeight:"bold"},T={display:"flex",alignItems:"center",gap:.5,background:"#52575D",borderRadius:"20px",padding:"5px 10px",color:"#fff",alignSelf:"flex-end",m:1},G={color:"#fff",padding:"4px","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.1)"}},O={minWidth:"20px",textAlign:"center",fontWeight:"bold"},Z={alignSelf:"flex-end",fontSize:"0.8rem",color:"#666",mt:.5},H={p:1,color:"#fff",background:"#52575D",alignSelf:"flex-end","&:hover":{background:"#52575D"},"&:disabled":{background:"#e0e0e0",color:"#9e9e9e"}},U=(0,a.memo)(D)},26494:(n,t,i)=>{i.d(t,{A:()=>h});var e=i(89379),a=i(80045),o=i(65043),r=i(58387),l=i(98610),d=i(34535),s=i(98206),c=i(92532),u=i(72372);function x(n){return(0,u.Ay)("MuiCardContent",n)}(0,c.A)("MuiCardContent",["root"]);var p=i(70579);const m=["className","component"],v=(0,d.Ay)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(n,t)=>t.root})({padding:16,"&:last-child":{paddingBottom:24}}),h=o.forwardRef((function(n,t){const i=(0,s.b)({props:n,name:"MuiCardContent"}),{className:o,component:d="div"}=i,c=(0,a.A)(i,m),u=(0,e.A)((0,e.A)({},i),{},{component:d}),h=(n=>{const{classes:t}=n;return(0,l.A)({root:["root"]},x,t)})(u);return(0,p.jsx)(v,(0,e.A)({as:d,className:(0,r.A)(h.root,o),ownerState:u,ref:t},c))}))},73594:(n,t,i)=>{i.r(t),i.d(t,{default:()=>g});var e,a=i(65043),o=i(26240),r=i(54552),l=i(30815),d=i(94496),s=i(81637),c=i(73216),u=i(20326),x=i(83003),p=i(84589),m=i(57528);const v=i(1529).Ay.div(e||(e=(0,m.A)(["\n  width: 100%;\n  display: grid;\n\n  align-items:center;\n  justify-content:center;\n  margin:0;\n  height: calc(100dvh - 10px);\n  padding-bottom:100px;\n\n\n\n  @media (max-width: 768px) {\n    height: calc(100dvh - 100px);\n  gap: 20px;\n\n  }\n\n"])));var h=i(10911),f=i(70579);function g(){const n=(0,o.A)(),t=((0,r.A)(n.breakpoints.down("sm")),(0,c.zy)()),i=((0,c.Zp)(),(0,x.wA)()),{products:e,loading:m,error:g}=(0,x.d4)((n=>n.products)),[A,y]=(0,a.useState)([]),[b,w]=(0,a.useState)("");(0,a.useEffect)((()=>{i((0,p.j0)())}),[i]),(0,a.useEffect)((()=>{const n=new URLSearchParams(t.search).get("q")||"";w(n),e.length>0&&j(n)}),[t.search,e]);const j=n=>{try{const t=n.toLowerCase().trim();if(!t)return void y(e);const i=["name","description","category"],a=e.filter((n=>i.some((i=>{const e=n[i];return null!=e&&e.toString().toLowerCase().includes(t)}))));y(a)}catch(t){console.error("Search error:",t)}};return(0,f.jsxs)(v,{className:"scroller",children:[(0,f.jsxs)(l.A,{sx:{mb:4,p:1,width:"100%"},children:[(0,f.jsx)(d.A,{variant:"h6",component:"h1",sx:{fontWeight:"bold"},children:b?'\u0646\u062a\u0627\u06cc\u062c \u062c\u0633\u062a\u062c\u0648 \u0628\u0631\u0627\u06cc "'.concat(b,'"'):"\u0647\u0645\u0647 \u0645\u062d\u0635\u0648\u0644\u0627\u062a"}),!m&&(0,f.jsxs)(d.A,{variant:"subtitle1",color:"text.secondary",sx:{mt:1},children:[A.length," \u0645\u062d\u0635\u0648\u0644 \u06cc\u0627\u0641\u062a \u0634\u062f"]})]}),m?(0,f.jsx)(l.A,{sx:{display:"flex",justifyContent:"center",py:10},children:(0,f.jsx)(s.A,{})}):g?(0,f.jsx)(d.A,{color:"error",sx:{py:4,textAlign:"center"},children:g}):0===A.length?(0,f.jsx)(d.A,{sx:{py:4,textAlign:"center"},children:b?'\u0647\u06cc\u0686 \u0646\u062a\u06cc\u062c\u0647\u200c\u0627\u06cc \u0628\u0631\u0627\u06cc "'.concat(b,'" \u06cc\u0627\u0641\u062a \u0646\u0634\u062f'):"\u0647\u06cc\u0686 \u0645\u062d\u0635\u0648\u0644\u06cc \u0645\u0648\u062c\u0648\u062f \u0646\u06cc\u0633\u062a"}):(0,f.jsx)(h.eq,{style:{width:"100vw"},children:A.map((n=>(0,f.jsx)(u.A,{product:n},n._id)))})]})}}}]);
//# sourceMappingURL=594.604a0a95.chunk.js.map