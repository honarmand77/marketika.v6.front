{"version":3,"file":"static/js/711.fd2ea98c.chunk.js","mappings":"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","sources":["assets/icons/marketika defullt.svg","components/ProductCard/ProductCard.jsx","components/ProductPage/ImageGallery.jsx","components/ProductPage/ProductFeatures.jsx","components/ProductPage/ProductTabs.jsx","api/views.js","api/reviews.js","components/ProductPage/ProductPage.jsx"],"sourcesContent":["var _path, _path2, _path3, _path4, _path5, _path6, _path7;\nconst _excluded = [\"title\", \"titleId\"];\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nfunction _objectWithoutProperties(e, t) { if (null == e) return {}; var o, r, i = _objectWithoutPropertiesLoose(e, t); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); for (r = 0; r < n.length; r++) o = n[r], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]); } return i; }\nfunction _objectWithoutPropertiesLoose(r, e) { if (null == r) return {}; var t = {}; for (var n in r) if ({}.hasOwnProperty.call(r, n)) { if (-1 !== e.indexOf(n)) continue; t[n] = r[n]; } return t; }\nimport * as React from \"react\";\nfunction SvgMarketikadefullt(_ref, svgRef) {\n  let {\n      title,\n      titleId\n    } = _ref,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 45,\n    height: 45,\n    viewBox: \"0 0 100 100\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M43 43C43 38.5817 46.5817 35 51 35C55.4183 35 59 38.5817 59 43C59 47.4183 55.4183 51 51 51C46.5817 51 43 47.4183 43 43Z\",\n    fill: \"transparent\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0 10C0 4.47715 4.47715 0 10 0H90C95.5228 0 100 4.47715 100 10V90C100 95.5228 95.5228 100 90 100H10C4.47715 100 0 95.5228 0 90V10Z\",\n    fill: \"transparent\"\n  })), _path3 || (_path3 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M33.9389 43.3727C34.0727 38.8358 40.4784 38.0243 41.7394 42.3845V42.3845C41.9108 42.9772 41.942 43.6016 41.8307 44.2084L36.2499 74.6164C36.0413 75.7533 34.746 76.3151 33.7734 75.6905V75.6905C33.2935 75.3824 33.0103 74.8452 33.0271 74.2752L33.9389 43.3727Z\",\n    fill: \"#eee\"\n  })), _path4 || (_path4 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M37.5219 51.3282C37.5877 48.7464 41.2657 48.342 41.8908 50.8479V50.8479C41.9629 51.1368 41.976 51.4373 41.9294 51.7314L38.7944 71.5351C38.689 72.2012 37.9138 72.517 37.3729 72.1143V72.1143C37.1391 71.9403 37.0044 71.6634 37.0118 71.372L37.5219 51.3282Z\",\n    fill: \"#eee\"\n  })), _path5 || (_path5 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M39.522 51.1835C39.5849 48.5822 43.301 48.1934 43.901 50.7253V50.7253C43.9664 51.0011 43.9783 51.2869 43.9362 51.5672L40.7909 72.4812C40.6889 73.1594 39.8934 73.4757 39.3536 73.0526V73.0526C39.1311 72.8782 39.004 72.609 39.0109 72.3264L39.522 51.1835Z\",\n    fill: \"#eee\"\n  })), _path6 || (_path6 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M34 43C34 33.6112 41.6112 26 51 26C60.3888 26 68 33.6112 68 43V44C68 53.3888 60.3888 61 51 61C41.6112 61 34 53.3888 34 44V43Z\",\n    fill: \"#eee\"\n  })), _path7 || (_path7 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M43 43C43 38.5817 46.5817 35 51 35C55.4183 35 59 38.5817 59 43C59 47.4183 55.4183 51 51 51C46.5817 51 43 47.4183 43 43Z\",\n    fill: \"#fff\"\n  })));\n}\nconst ForwardRef = /*#__PURE__*/React.forwardRef(SvgMarketikadefullt);\nexport default __webpack_public_path__ + \"static/media/marketika defullt.7ba899dccbc85f4ffaadd4300f6c1069.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useCallback, useState, useEffect, memo } from \"react\";\r\nimport {\r\n  CardMedia,\r\n  CardContent,\r\n  CardActionArea,\r\n  IconButton,\r\n  Typography,\r\n  Skeleton,\r\n  Tooltip,\r\n  Box,\r\n  useTheme,\r\n  useMediaQuery,\r\n  Chip,\r\n  CircularProgress,\r\n} from \"@mui/material\";\r\nimport {\r\n  Favorite as FavoriteIcon,\r\n  FavoriteBorder as FavoriteBorderIcon,\r\n  ShoppingCart as ShoppingCartIcon,\r\n  Add as AddIcon,\r\n  Remove as RemoveIcon,\r\n  Delete\r\n} from \"@mui/icons-material\";\r\nimport _default from '../../assets/icons/marketika defullt.svg';\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { Api_Url } from \"../../api\";\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { toggleLike } from '../../redux/reducers/productsSlice';\r\nimport { \r\n  addItemToCart, \r\n  removeItemFromCart, \r\n  selectCartItems\r\n} from \"../../redux/reducers/cartSlice\";\r\n\r\n// تابع کمکی برای فرمت قیمت\r\nconst formatPrice = (price) => {\r\n  const parsedPrice = typeof price === 'number' ? price : parseFloat(price) || 0;\r\n  return new Intl.NumberFormat('fa-IR').format(parsedPrice) + ' تومان';\r\n};\r\n\r\nconst ProductCard = ({ product, loading, ClassName }) => {\r\n  // Hooks و stateها\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  const theme = useTheme();\r\n  const isMobile = useMediaQuery(theme.breakpoints.down('sm'));\r\n  \r\n  const { user, token } = useSelector(state => state.auth);\r\n  const cartItems = useSelector(selectCartItems);\r\n  const cartLoading = useSelector(state => state.cart.cartLoadingStates[product?._id] || false);\r\n  const likeLoading = useSelector(state => state.products.loadingStates[product?._id] || false);\r\n  \r\n  const [imageError, setImageError] = useState(false);\r\n  const [isAnimating, setIsAnimating] = useState(false);\r\n  const [localCartState, setLocalCartState] = useState({\r\n    isInCart: false,\r\n    quantity: 0,\r\n    item: null\r\n  });\r\n\r\n  // مقادیر محاسبه شده\r\n  const isFavorite = product?.likes?.includes(user?.id) || false;\r\n  const likeCount = product?.likes?.length || 0;\r\n  const productPrice = parseFloat(product?.price?.$numberDecimal || product?.price || 0);\r\n\r\n  // محاسبه وضعیت سبد خرید بر اساس تغییرات\r\n  useEffect(() => {\r\n    const cartItem = cartItems.find(item => item?.product?._id === product?._id);\r\n    \r\n    setLocalCartState({\r\n      isInCart: !!cartItem,\r\n      quantity: cartItem?.quantity || 0,\r\n      item: cartItem || null\r\n    });\r\n  }, [cartItems, product?._id]);\r\n\r\n  // مدیریت علاقه‌مندی‌ها\r\n  const handleLike = useCallback(async (e) => {\r\n    e.stopPropagation();\r\n    setIsAnimating(true);\r\n    \r\n    if (!token) {\r\n      navigate(\"/auth\");\r\n      return;\r\n    }\r\n\r\n\r\n    try {\r\n      await dispatch(toggleLike({\r\n        productId: product?._id,\r\n        userId: user?.id,\r\n        isCurrentlyLiked: isFavorite\r\n      })).unwrap();\r\n    } catch (error) {\r\n      console.error(\"خطا در عملیات لایک:\", error);\r\n    }\r\n    setIsAnimating(false);\r\n\r\n  }, [product?._id, user?.id, token, navigate, isFavorite, dispatch]);\r\n\r\n  // افزودن به سبد خرید با به‌روزرسانی فوری\r\n  const handleAddToCart = useCallback(async (e) => {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    \r\n    if (!token) return navigate(\"/auth\");\r\n    if (cartLoading) return;\r\n    \r\n    // به‌روزرسانی فوری UI\r\n    setLocalCartState(prev => ({\r\n      isInCart: true,\r\n      quantity: prev.quantity + 1,\r\n      item: prev.item || { // ایجاد یک آیتم موقت\r\n        _id: `temp-${Date.now()}`,\r\n        product,\r\n        quantity: prev.quantity + 1,\r\n        priceAtAddition: productPrice\r\n      }\r\n    }));\r\n\r\n    try {\r\n      await dispatch(addItemToCart({\r\n        userId: user?.id,\r\n        productId: product?._id,\r\n        quantity: 1,\r\n      })).unwrap();\r\n    } catch (error) {\r\n      // بازگردانی در صورت خطا\r\n      setLocalCartState(prev => ({\r\n        ...prev,\r\n        isInCart: prev.quantity > 0,\r\n        quantity: Math.max(0, prev.quantity),\r\n        item: prev.quantity > 0 ? prev.item : null\r\n      }));\r\n      console.error(\"خطا در افزودن به سبد خرید:\", error);\r\n    }\r\n  }, [product, user?.id, token, navigate, dispatch, cartLoading, productPrice]);\r\n\r\n  // کاهش تعداد در سبد خرید با به‌روزرسانی فوری\r\n  const handleDecreaseQuantity = useCallback(async (e) => {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    \r\n    if (!token || cartLoading) return;\r\n    \r\n    // به‌روزرسانی فوری UI\r\n    setLocalCartState(prev => ({\r\n      ...prev,\r\n      quantity: Math.max(0, prev.quantity - 1),\r\n      isInCart: prev.quantity > 1\r\n    }));\r\n\r\n    try {\r\n      await dispatch(addItemToCart({\r\n        userId: user?.id,\r\n        productId: product?._id,\r\n        quantity: -1,\r\n      })).unwrap();\r\n    } catch (error) {\r\n      // بازگردانی در صورت خطا\r\n      setLocalCartState(prev => ({\r\n        ...prev,\r\n        quantity: prev.quantity + 1,\r\n        isInCart: true\r\n      }));\r\n      console.error(\"خطا در کاهش تعداد محصول:\", error);\r\n    }\r\n  }, [product?._id, user?.id, token, dispatch, cartLoading]);\r\n\r\n  // حذف کامل از سبد خرید\r\n  const handleRemoveItem = useCallback(async (e) => {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    \r\n    if (!token || cartLoading || !localCartState.item) return;\r\n    \r\n    // به‌روزرسانی فوری UI\r\n    setLocalCartState({\r\n      isInCart: false,\r\n      quantity: 0,\r\n      item: null\r\n    });\r\n\r\n    try {\r\n      await dispatch(removeItemFromCart(localCartState.item._id)).unwrap();\r\n    } catch (error) {\r\n      // بازگردانی در صورت خطا\r\n      setLocalCartState({\r\n        isInCart: true,\r\n        quantity: localCartState.quantity,\r\n        item: localCartState.item\r\n      });\r\n      console.error('خطا در حذف محصول:', error);\r\n    }\r\n  }, [localCartState, dispatch, cartLoading, token]);\r\n\r\n  // وضعیت موجودی محصول\r\n  const renderStockStatus = useCallback(() => {\r\n    const stock = parseInt(product?.stock || 0);\r\n    \r\n    if (stock <= 0) {\r\n      return (\r\n        <Chip \r\n          label=\"ناموجود\" \r\n          size=\"small\" \r\n          color=\"error\" \r\n          sx={{ mr: 1, mb: 1 }} \r\n        />\r\n      );\r\n    }\r\n    \r\n    if (stock < 5) {\r\n      return (\r\n        <Chip \r\n          label={`تنها ${stock} عدد باقی مانده`} \r\n          size=\"small\" \r\n          color=\"warning\" \r\n          sx={{ mr: 1, mb: 1 }} \r\n        />\r\n      );\r\n    }\r\n    \r\n    return null;\r\n  }, [product?.stock]);\r\n\r\n  // مدیریت خطای تصویر\r\n  const handleImageError = useCallback(() => setImageError(true), []);\r\n\r\n  // مدیریت کلیک روی کارت محصول\r\n  const handleCardClick = useCallback(() => {\r\n    navigate(`/productPage/${product?._id}`);\r\n  }, [product?._id, navigate]);\r\n\r\n  // نمایش اسکلت در حالت لودینگ\r\n  if (loading) {\r\n    return (\r\n      <CardActionArea className={`card ${ClassName}`} sx={skeletonStyles}>\r\n        <Skeleton variant=\"rectangular\" height={200} />\r\n        <CardContent>\r\n          <Skeleton variant=\"text\" width=\"60%\" />\r\n          <Skeleton variant=\"text\" />\r\n          <Skeleton variant=\"text\" width=\"40%\" />\r\n        </CardContent>\r\n      </CardActionArea>\r\n    );\r\n  }\r\n\r\n  // محاسبه قیمت کل برای این محصول\r\n  const totalPrice = localCartState.item \r\n    ? localCartState.item.priceAtAddition * localCartState.quantity \r\n    : productPrice * localCartState.quantity;\r\n\r\n  return (\r\n    <CardActionArea\r\n      className={`Card ${ClassName}`}\r\n      sx={cardStyles}\r\n      onClick={handleCardClick}\r\n    >\r\n      {/* دکمه علاقه‌مندی‌ها */}\r\n      <Tooltip title={isFavorite ? \"حذف از علاقه‌مندی‌ها\" : \"افزودن به علاقه‌مندی‌ها\"}>\r\n        <IconButton\r\n          aria-label=\"toggle favorite\"\r\n          onClick={handleLike}\r\n          sx={favoriteButtonStyles}\r\n        >\r\n          <Typography variant=\"body2\" component=\"div\" sx={{ ml: 0.5 }}>\r\n            {likeCount}\r\n          </Typography>\r\n          { isFavorite ? (\r\n            <FavoriteIcon sx={favoriteIconStyles(isAnimating)} />\r\n          ) : (\r\n            <FavoriteBorderIcon />\r\n          )}\r\n        </IconButton>\r\n      </Tooltip>\r\n\r\n      {/* تصویر محصول */}\r\n      <CardActionArea className=\"img\" sx={imageContainerStyles}>\r\n        <CardMedia\r\n          component=\"img\"\r\n          height={isMobile ? \"150px\" : \"200px\"}\r\n          src={imageError ? _default : `${Api_Url}/${product?.images?.[0]}`}\r\n          alt={product?.name}\r\n          sx={imageStyles}\r\n          onError={handleImageError}\r\n          placeholder=\"blur\"\r\n          loading=\"lazy\"\r\n        />\r\n      </CardActionArea>\r\n\r\n      {/* محتوای محصول */}\r\n      <CardContent sx={contentStyles}>\r\n        {/* عنوان محصول */}\r\n        <Typography\r\n          variant=\"body2\"\r\n          component=\"div\"\r\n          sx={titleStyles}\r\n        >\r\n          {product?.name || \"بدون عنوان\"}\r\n        </Typography>\r\n        \r\n        {/* وضعیت موجودی و دسته‌بندی */}\r\n        <Box sx={{ mt: 1 }}>\r\n          {renderStockStatus()}\r\n          <Chip\r\n            label={`${product?.category?.name || \"بدون دسته‌بندی\"}`}\r\n            size=\"small\"\r\n            sx={{ mr: 1, mb: 1 }}\r\n          />\r\n          <Chip\r\n            label={`${product?.subCategory?.name || \"بدون دسته‌بندی\"}`}\r\n            size=\"small\"\r\n            sx={{ mr: 1, mb: 1 }}\r\n          />\r\n        </Box>\r\n        \r\n        {/* قیمت و مدیریت سبد خرید */}\r\n        <Box sx={cartSectionStyles}>\r\n          <Typography variant=\"body2\" sx={priceStyles}>\r\n            {formatPrice(productPrice)}\r\n          </Typography>\r\n\r\n          {localCartState.isInCart ? (\r\n            <Box sx={cartControlsStyles}>\r\n              <IconButton\r\n                aria-label=\"حذف محصول\"\r\n                onClick={handleRemoveItem}\r\n                disabled={cartLoading}\r\n                size=\"small\"\r\n                sx={cartIconStyles}\r\n              >\r\n                 <Delete fontSize=\"small\" />\r\n              </IconButton>\r\n              \r\n              <IconButton\r\n                aria-label=\"کاهش تعداد\"\r\n                onClick={handleDecreaseQuantity}\r\n                disabled={cartLoading || localCartState.quantity <= 1}\r\n                size=\"small\"\r\n                sx={cartIconStyles}\r\n              >\r\n                <RemoveIcon fontSize=\"small\" />\r\n              </IconButton>\r\n              \r\n              <Typography variant=\"body2\" sx={quantityStyles}>\r\n                { localCartState.quantity}\r\n              </Typography>\r\n              \r\n              <IconButton\r\n                aria-label=\"افزایش تعداد\"\r\n                onClick={handleAddToCart}\r\n                disabled={cartLoading}\r\n                size=\"small\"\r\n                sx={cartIconStyles}\r\n              >\r\n                <AddIcon fontSize=\"small\" />\r\n              </IconButton>\r\n            </Box>\r\n          ) : (\r\n            <Tooltip title=\"افزودن به سبد خرید\">\r\n              <IconButton\r\n                aria-label=\"افزودن به سبد خرید\"\r\n                onClick={handleAddToCart}\r\n                disabled={cartLoading}\r\n                sx={addToCartButtonStyles}\r\n              >\r\n                <ShoppingCartIcon fontSize=\"medium\" sx={{ padding: \"2px\" }} />\r\n              </IconButton>\r\n            </Tooltip>\r\n          )}\r\n          \r\n          {localCartState.isInCart && (\r\n            <Typography variant=\"body2\" sx={totalPriceStyles}>\r\n              {formatPrice(totalPrice)}\r\n            </Typography>\r\n          )}\r\n        </Box>\r\n      </CardContent>\r\n    </CardActionArea>\r\n  );\r\n};\r\n\r\n// استایل‌ها\r\nconst skeletonStyles = { \r\n  position: \"relative\", \r\n  height: 400, \r\n  width: 250, \r\n  borderRadius: \"0px\" \r\n};\r\n\r\nconst cardStyles = {\r\n  position: \"relative\",\r\n  maxHeight: \"max-content\",\r\n  boxShadow: \"none\",\r\n  padding: \"5px\",\r\n  display: \"flex\",\r\n  width: { xs: '100%', sm: '250px' },\r\n  flexDirection: \"column\",\r\n  transition: \"transform 0.2s, box-shadow 0.2s\",\r\n  \"&:hover\": {\r\n    transform: \"translateY(-4px)\",\r\n    background:  \"#52575D\",\r\n    \">:nth-child(3)\": {\r\n      \"*\": { color: \"#fff\" }\r\n    }\r\n  },\r\n};\r\n\r\nconst favoriteButtonStyles = {\r\n  position: \"absolute\",\r\n  top: 1,\r\n  right: 1,\r\n  zIndex: 1,\r\n  color: \"#fff\",\r\n  display: \"flex\",\r\n  alignItems: \"center\",\r\n  padding: \"5px 10px\",\r\n  background: \"#52575D\",\r\n  borderRadius: \"5px\"\r\n};\r\n\r\nconst favoriteIconStyles = (isAnimating) => ({\r\n  transform: isAnimating ? 'scale(1.1)' : 'scale(1)',\r\n  transition: '.5s ease',\r\n  color: isAnimating ? '#ff4081' : 'inherit'\r\n});\r\n\r\nconst imageContainerStyles = { \r\n  background: \"#fff\", \r\n  borderRadius: \"8px\" \r\n};\r\n\r\nconst imageStyles = { \r\n  objectFit: \"contain\", \r\n  padding: \"5px\" \r\n};\r\n\r\nconst contentStyles = {\r\n  flexGrow: 1,\r\n  display: \"flex\",\r\n  flexDirection: \"column\",\r\n  justifyContent: \"space-between\",\r\n  padding: \"5px\",\r\n  width: \"100%\"\r\n};\r\n\r\nconst titleStyles = {\r\n  mb: 1,\r\n  fontWeight: 600,\r\n  overflow: \"hidden\",\r\n  textOverflow: \"ellipsis\",\r\n  display: \"-webkit-box\",\r\n  WebkitLineClamp: 1,\r\n  WebkitBoxOrient: \"vertical\",\r\n};\r\n\r\nconst cartSectionStyles = {\r\n  mt: 2,\r\n  display: \"flex\",\r\n  flexDirection: \"column\"\r\n};\r\n\r\nconst priceStyles = { \r\n  p: 1, \r\n  color: \"#52575D\", \r\n  fontWeight: \"bold\" \r\n};\r\n\r\nconst cartControlsStyles = {\r\n  display: 'flex', \r\n  alignItems: 'center',\r\n  gap: 0.5,\r\n  background: \"#52575D\",\r\n  borderRadius: '20px',\r\n  padding: '5px 10px',\r\n  color: '#fff',\r\n  alignSelf: \"flex-end\",\r\n  m: 1\r\n};\r\n\r\nconst cartIconStyles = { \r\n  color: '#fff',\r\n  padding: '4px',\r\n  '&:hover': { \r\n    backgroundColor: 'rgba(255, 255, 255, 0.1)' \r\n  }\r\n};\r\n\r\nconst quantityStyles = { \r\n  minWidth: '20px', \r\n  textAlign: 'center',\r\n  fontWeight: 'bold'\r\n};\r\n\r\nconst totalPriceStyles = {\r\n  alignSelf: \"flex-end\",\r\n  fontSize: \"0.8rem\",\r\n  color: \"#666\",\r\n  mt: 0.5\r\n};\r\n\r\nconst addToCartButtonStyles = { \r\n  p: 1, \r\n  color: \"#fff\", \r\n  background: \"#52575D\",\r\n  alignSelf: \"flex-end\",\r\n  '&:hover': {\r\n    background: \"#52575D\"\r\n  },\r\n  '&:disabled': {\r\n    background: \"#e0e0e0\",\r\n    color: \"#9e9e9e\"\r\n  }\r\n};\r\n\r\nexport default memo(ProductCard);","import React from 'react';\r\nimport { Box, IconButton, Tooltip } from '@mui/material';\r\nimport { Favorite, FavoriteBorder } from '@mui/icons-material';\r\nimport { motion } from 'framer-motion';\r\nimport { Api_Url } from '../../api';\r\nimport {CircularProgress} from '@mui/material';\r\nconst ImageGallery = ({ \r\n  product, \r\n  currentImageIndex, \r\n  onImageChange, \r\n  onWishlistToggle, \r\n  wishlisted, \r\n  loadingWishlist \r\n}) => {\r\n  return (\r\n    <Box sx={{ position: 'relative', borderRadius: '16px', overflow: 'hidden' }}>\r\n      {/* Wishlist Button */}\r\n      <Tooltip title={wishlisted ? \"حذف از علاقه‌مندی‌ها\" : \"افزودن به علاقه‌مندی‌ها\"}>\r\n        <IconButton\r\n          onClick={onWishlistToggle}\r\n          disabled={loadingWishlist}\r\n          sx={{\r\n            position: \"absolute\",\r\n            top: 8,\r\n            right: 8,\r\n            zIndex: 2,\r\n            backgroundColor: 'rgba(255,255,255,0.9)',\r\n            boxShadow: 1,\r\n            '&:hover': {\r\n              backgroundColor: \"rgba(255,255,255,1)\",\r\n              transform: 'scale(1.1)'\r\n            }\r\n          }}\r\n        >\r\n          {loadingWishlist ? (\r\n            <CircularProgress size={24} />\r\n          ) : wishlisted ? (\r\n            <Favorite color=\"error\" />\r\n          ) : (\r\n            <FavoriteBorder />\r\n          )}\r\n        </IconButton>\r\n      </Tooltip>\r\n\r\n      {/* Main Image */}\r\n      <motion.img\r\n        src={`${Api_Url}/${product.images[currentImageIndex]}`}\r\n        alt={product.name}\r\n        style={{\r\n          width: '100%',\r\n          height: 'auto',\r\n          objectFit: 'contain',\r\n          cursor: 'zoom-in'\r\n        }}\r\n        initial={{ opacity: 0 }}\r\n        animate={{ opacity: 1 }}\r\n        transition={{ duration: 0.5 }}\r\n      />\r\n\r\n      {/* Thumbnails */}\r\n      <Box sx={{ display: 'flex', gap: '8px', mt: 2, overflowX: 'auto' }}>\r\n        {product.images.map((img, index) => (\r\n          <motion.div\r\n            key={index}\r\n            onClick={() => onImageChange(index)}\r\n            style={{\r\n              width: '64px',\r\n              height: '64px',\r\n              minWidth: '64px',\r\n              borderRadius: '8px',\r\n              overflow: 'hidden',\r\n              border: `2px solid ${currentImageIndex === index ? 'primary.main' : 'transparent'}`,\r\n              cursor: 'pointer',\r\n              backgroundColor: 'grey.100'\r\n            }}\r\n            whileHover={{ scale: 1.05 }}\r\n          >\r\n            <img\r\n              src={`${Api_Url}/${img}`}\r\n              alt={`تصویر ${index + 1}`}\r\n              style={{ width: '100%', height: '100%', objectFit: 'cover' }}\r\n            />\r\n          </motion.div>\r\n        ))}\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default React.memo(ImageGallery); ","import React from 'react';\r\nimport { Grid, Paper, Typography,Box } from '@mui/material';\r\nimport {\r\n  LocalShipping,\r\n  VerifiedUser,\r\n  SupportAgent,\r\n  Payment\r\n} from '@mui/icons-material';\r\n\r\nconst ProductFeatures = () => {\r\n  const features = [\r\n    { icon: <LocalShipping fontSize=\"small\" />, title: \"ارسال سریع\", desc: \"تحویل در 24 ساعت\" },\r\n    { icon: <VerifiedUser fontSize=\"small\" />, title: \"گارانتی\", desc: \"18 ماه ضمانت\" },\r\n    { icon: <SupportAgent fontSize=\"small\" />, title: \"پشتیبانی\", desc: \"24/7\" },\r\n    { icon: <Payment fontSize=\"small\" />, title: \"پرداخت\", desc: \"امن\" },\r\n  ];\r\n\r\n  return (\r\n    <Grid container spacing={2} sx={{ mt: 3 }}>\r\n      {features.map((feature, index) => (\r\n        <Grid item xs={6} sm={3} key={index}>\r\n          <Paper elevation={2} sx={{ p: 2, borderRadius: '12px', display: 'flex', alignItems: 'center', gap: 2 }}>\r\n            <Box sx={{ color: 'primary.main' }}>{feature.icon}</Box>\r\n            <Box>\r\n              <Typography variant=\"body2\" fontWeight=\"bold\">{feature.title}</Typography>\r\n              <Typography variant=\"caption\" color=\"text.secondary\">{feature.desc}</Typography>\r\n            </Box>\r\n          </Paper>\r\n        </Grid>\r\n      ))}\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default React.memo(ProductFeatures); ","import React from 'react';\r\nimport { \r\n  Box, \r\n  Typography, \r\n  Tabs, \r\n  Tab, \r\n  Paper, \r\n  Avatar, \r\n  Rating, \r\n  TextField, \r\n  Button,\r\n  Divider,\r\n  \r\n} from '@mui/material';\r\nimport { ThumbUp, Star, StarBorder } from '@mui/icons-material';\r\n\r\nconst ProductTabs = ({\r\n  activeTab,\r\n  onTabChange,\r\n  product,\r\n  reviews,\r\n  rating,\r\n  reviewText,\r\n  onRatingChange,\r\n  onReviewChange,\r\n  onSubmitReview\r\n}) => {\r\n  return (\r\n    <Paper elevation={0} sx={{ borderRadius: '12px', overflow: 'hidden', bgcolor: 'background.default' }}>\r\n      <Tabs \r\n        value={activeTab} \r\n        onChange={(e, newValue) => onTabChange(newValue)}\r\n        variant=\"fullWidth\"\r\n        sx={{\r\n          '& .MuiTabs-indicator': {\r\n            backgroundColor: 'primary.main',\r\n            height: 3,\r\n          },\r\n          '& .MuiTab-root': {\r\n            minWidth: 'unset',\r\n            fontWeight: 600,\r\n            '&.Mui-selected': {\r\n              color: 'primary.main',\r\n            },\r\n          },\r\n        }}\r\n      >\r\n        <Tab label=\"مشخصات\" />\r\n        <Tab label=\"نظرات\" />\r\n        <Tab label=\"گارانتی\" />\r\n      </Tabs>\r\n      \r\n      <Box sx={{ p: 3 }}>\r\n        {activeTab === 0 && (\r\n          <Typography variant=\"body1\" paragraph>\r\n            {product.fullDescription || product.description}\r\n          </Typography>\r\n        )}\r\n        \r\n        {activeTab === 1 && (\r\n          <Box>\r\n            {reviews.length > 0 ? (\r\n              reviews.map((review, index) => (\r\n                <Box key={index} sx={{ mb: 3 }}>\r\n                  <Box sx={{ display: 'flex', alignItems: 'center', mb: 1 }}>\r\n                    <Avatar sx={{ mr: 2 }}>{review.user.charAt(0)}</Avatar>\r\n                    <Box>\r\n                      <Typography variant=\"subtitle1\">{review.user}</Typography>\r\n                      <Box sx={{ display: 'flex', alignItems: 'center' }}>\r\n                        <Rating value={review.rating} size=\"small\" readOnly />\r\n                        <Typography variant=\"caption\" sx={{ ml: 1 }}>\r\n                          {new Date(review.date).toLocaleDateString('fa-IR')}\r\n                        </Typography>\r\n                      </Box>\r\n                    </Box>\r\n                  </Box>\r\n                  <Typography variant=\"body2\">{review.comment}</Typography>\r\n                  {index < reviews.length - 1 && <Divider sx={{ mt: 2 }} />}\r\n                </Box>\r\n              ))\r\n            ) : (\r\n              <Typography variant=\"body2\" color=\"text.secondary\" textAlign=\"center\">\r\n                هنوز نظری ثبت نشده است.\r\n              </Typography>\r\n            )}\r\n            \r\n            {/* Review Form */}\r\n            <Paper elevation={0} sx={{ p: 3, mt: 3, borderRadius: '12px' }}>\r\n              <Typography variant=\"h6\" gutterBottom>\r\n                نظر خود را ثبت کنید\r\n              </Typography>\r\n              <Box sx={{ mb: 2 }}>\r\n                <Rating\r\n                  value={rating}\r\n                  onChange={(e, newValue) => onRatingChange(newValue)}\r\n                  precision={0.5}\r\n                  icon={<Star fontSize=\"inherit\" />}\r\n                  emptyIcon={<StarBorder fontSize=\"inherit\" />}\r\n                />\r\n              </Box>\r\n              <TextField\r\n                fullWidth\r\n                multiline\r\n                rows={4}\r\n                label=\"نظر شما\"\r\n                value={reviewText}\r\n                onChange={onReviewChange}\r\n                sx={{ mb: 2 }}\r\n              />\r\n              <Button \r\n                variant=\"contained\" \r\n                onClick={onSubmitReview}\r\n                startIcon={<ThumbUp />}\r\n                fullWidth\r\n              >\r\n                ثبت نظر\r\n              </Button>\r\n            </Paper>\r\n          </Box>\r\n        )}\r\n        \r\n        {activeTab === 2 && (\r\n          <Box>\r\n            <Typography variant=\"h6\" gutterBottom>\r\n              گارانتی و شرایط بازگشت\r\n            </Typography>\r\n            <Typography variant=\"body1\" paragraph>\r\n              این محصول دارای 18 ماه گارانتی شرکتی می‌باشد. در صورت وجود هرگونه مشکل در محصول، \r\n              می‌توانید تا 7 روز پس از خرید، محصول را مرجوع نمایید.\r\n            </Typography>\r\n          </Box>\r\n        )}\r\n      </Box>\r\n    </Paper>\r\n  );\r\n};\r\n\r\nexport default React.memo(ProductTabs);","import api from \"./index\";\r\n\r\nexport const viewProduct = async (productId, userId, token) => {\r\n  try {\r\n    const response = await api.post(\r\n      `views/add-view/${productId}`,\r\n      { userId, productId },\r\n      {\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      }\r\n    );\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error(\"خطا در ویو محصول:\", error);\r\n  }\r\n};\r\n\r\nexport const getProductViewers = async (productId) => {\r\n  try {\r\n    const response = await api.get(`views/${productId}/viewers`);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error(\"Error fetching viewers:\", error);\r\n    return null;\r\n  }\r\n};","import api from \"./index\"; // استفاده از تنظیمات axios از فایل index\r\n\r\n/**\r\n * دریافت نظرات یک محصول\r\n * @param {string} productId - آی‌دی محصول\r\n * @returns {Promise<Array>} - لیست نظرات\r\n */\r\nexport const fetchReviews = async (productId) => {\r\n  try {\r\n    const response = await api.get(`/products/${productId}/reviews`);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error fetching reviews:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n * ثبت نظر جدید برای محصول\r\n * @param {string} productId - آی‌دی محصول\r\n * @param {Object} reviewData - داده‌های نظر شامل rating و comment\r\n * @param {string} token - توکن احراز هویت\r\n * @returns {Promise<Object>} - نظر ثبت شده\r\n */\r\nexport const submitReview = async (productId, reviewData, token) => {\r\n  try {\r\n    const response = await api.post(\r\n      `/products/${productId}/reviews`,\r\n      reviewData,\r\n      {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      }\r\n    );\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error submitting review:', error);\r\n    throw error;\r\n  }\r\n};","import React, { useState, useEffect, useCallback, useMemo } from \"react\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport {\r\n  Container,\r\n  Typography,\r\n  Box,\r\n  Grid,\r\n  Button,\r\n  Skeleton,\r\n  Alert,\r\n  Chip,\r\n  IconButton,\r\n  TextField,\r\n  Rating,\r\n  Snackbar,\r\n  Stack,\r\n  useMediaQuery,\r\n  useTheme,\r\n  Slide,\r\n  Tooltip,\r\n  CircularProgress,\r\n  Fab,\r\n  Badge,\r\n  Paper,\r\n} from \"@mui/material\";\r\nimport {\r\n  ShoppingCart,\r\n  Telegram,\r\n  WhatsApp,\r\n  Instagram,\r\n  Twitter,\r\n  ArrowBack,\r\n  Add,\r\n  Remove,\r\n  Star,\r\n  StarBorder\r\n} from \"@mui/icons-material\";\r\nimport { motion } from \"framer-motion\";\r\nimport { styled } from \"@mui/system\";\r\n\r\n// Custom Components\r\nimport ProductCard from \"../../components/ProductCard/ProductCard\";\r\nimport ImageGallery from \"./ImageGallery\";\r\nimport ProductFeatures from \"./ProductFeatures\";\r\nimport ProductTabs from \"./ProductTabs\";\r\n\r\n// API Functions\r\nimport { viewProduct } from \"../../api/views\";\r\nimport { addToCart} from \"../../api/cart\";\r\nimport { likeProduct } from \"../../api/products\"\r\nimport { fetchProducts } from \"../../api/products\";\r\nimport { submitReview, fetchReviews } from \"../../api/reviews\";\r\n\r\n// Styled Components\r\nconst ProductContainer = styled(Container)(({ theme }) => ({\r\n  paddingTop: theme.spacing(4),\r\n  paddingBottom: theme.spacing(4),\r\n}));\r\n\r\nconst PriceContainer = styled(Box)({\r\n  display: 'flex',\r\n  alignItems: 'center',\r\n  gap: '16px',\r\n  margin: '16px 0',\r\n});\r\n\r\nconst DiscountBadge = styled(Chip)(({ theme }) => ({\r\n  backgroundColor: theme.palette.error.light,\r\n  color: theme.palette.error.contrastText,\r\n  fontWeight: 'bold',\r\n  padding: '4px 8px',\r\n}));\r\n\r\nconst ActionButton = styled(Button)(({ theme }) => ({\r\n  padding: '12px 24px',\r\n  borderRadius: '8px',\r\n  fontWeight: '600',\r\n  transition: 'all 0.3s ease',\r\n  '&:hover': {\r\n    transform: 'translateY(-2px)',\r\n    boxShadow: theme.shadows[4],\r\n  },\r\n}));\r\n\r\n function ProductPage() {\r\n  const { productId } = useParams();\r\n  const navigate = useNavigate();\r\n  const theme = useTheme();\r\n  const isMobile = useMediaQuery(theme.breakpoints.down('md'));\r\n\r\n  // Main state\r\n  const [state, setState] = useState({\r\n    selectedProduct: null,\r\n    relatedProducts: [],\r\n    loading: true,\r\n    error: null,\r\n    quantity: 1,\r\n    rating: 0,\r\n    review: \"\",\r\n    reviews: [],\r\n    activeTab: 0,\r\n    wishlisted: false,\r\n    currentImageIndex: 0,\r\n    loadingWishlist: false,\r\n    loadingAddToCart: false,\r\n  });\r\n\r\n  const [toast, setToast] = useState({ \r\n    open: false, \r\n    message: \"\", \r\n    severity: \"info\" \r\n  });\r\n\r\n  // Calculate discounted price\r\n  const discountedPrice = useMemo(() => {\r\n    if (!state.selectedProduct?.discount) return state.selectedProduct?.price;\r\n    return Math.round(state.selectedProduct.price * (100 - state.selectedProduct.discount) / 100);\r\n  }, [state.selectedProduct]);\r\n\r\n  // Load product data\r\n  const loadProduct = useCallback(async () => {\r\n    try {\r\n      setState(prev => ({ ...prev, loading: true, error: null }));\r\n      \r\n      const products = await fetchProducts();\r\n      const product = products.find((p) => p._id === productId);\r\n      \r\n      if (!product) {\r\n        setState(prev => ({ ...prev, error: \"محصول مورد نظر یافت نشد.\" }));\r\n        return;\r\n      }\r\n\r\n      const [reviews] = await Promise.all([\r\n        fetchReviews(productId).catch(() => []),\r\n        viewProduct(productId).catch(console.error)\r\n      ]);\r\n\r\n      setState(prev => ({\r\n        ...prev,\r\n        selectedProduct: product,\r\n        relatedProducts: products\r\n          .filter((p) => p.category._id === product.category._id && p._id !== productId)\r\n          .slice(0, 4),\r\n        reviews,\r\n        rating: product.averageRating || 0,\r\n      }));\r\n\r\n    } catch (error) {\r\n      console.error(\"خطا در دریافت محصولات:\", error);\r\n      setState(prev => ({ ...prev, error: \"خطا در بارگذاری محصول. لطفاً دوباره تلاش کنید.\" }));\r\n    } finally {\r\n      setState(prev => ({ ...prev, loading: false }));\r\n    }\r\n  }, [productId]);\r\n\r\n  useEffect(() => {\r\n    loadProduct();\r\n  }, [loadProduct]);\r\n\r\n  // Handlers\r\n  const handleAddToCart = async () => {\r\n    const token = localStorage.getItem(\"token\");\r\n    if (!token) {\r\n      showToast(\"لطفاً ابتدا وارد شوید\", \"warning\");\r\n      navigate(\"/auth\", { state: { from: `/product/${productId}` } });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setState(prev => ({ ...prev, loadingAddToCart: true }));\r\n      await addToCart(state.selectedProduct._id, state.quantity, token);\r\n      showToast(\"محصول به سبد خرید اضافه شد\", \"success\");\r\n    } catch (error) {\r\n      showToast(\"خطا در افزودن به سبد خرید\", \"error\");\r\n    } finally {\r\n      setState(prev => ({ ...prev, loadingAddToCart: false }));\r\n    }\r\n  };\r\n\r\n  const handleWishlistToggle = async () => {\r\n    const token = localStorage.getItem(\"token\");\r\n    if (!token) {\r\n      showToast(\"لطفاً ابتدا وارد شوید\", \"warning\");\r\n      navigate(\"/auth\", { state: { from: `/product/${productId}` } });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setState(prev => ({ ...prev, loadingWishlist: true }));\r\n      await likeProduct(state.selectedProduct._id, token);\r\n      setState(prev => ({\r\n        ...prev,\r\n        wishlisted: !prev.wishlisted,\r\n        loadingWishlist: false,\r\n      }));\r\n      showToast(\r\n        state.wishlisted ? \"از لیست علاقه‌مندی‌ها حذف شد\" : \"به لیست علاقه‌مندی‌ها اضافه شد\",\r\n        \"success\"\r\n      );\r\n    } catch (error) {\r\n      showToast(\"خطا در بروزرسانی لیست علاقه‌مندی‌ها\", \"error\");\r\n      setState(prev => ({ ...prev, loadingWishlist: false }));\r\n    }\r\n  };\r\n\r\n  const handleSubmitReview = async () => {\r\n    if (!state.review || state.rating === 0) {\r\n      showToast(\"لطفاً امتیاز و نظر خود را وارد کنید\", \"warning\");\r\n      return;\r\n    }\r\n    \r\n    const token = localStorage.getItem(\"token\");\r\n    if (!token) {\r\n      showToast(\"لطفاً ابتدا وارد شوید\", \"warning\");\r\n      navigate(\"/auth\", { state: { from: `/product/${productId}` } });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const newReview = await submitReview(\r\n        productId,\r\n        { rating: state.rating, comment: state.review },\r\n        token\r\n      );\r\n      \r\n      const updatedReviews = [...state.reviews, newReview];\r\n      const newAverage = updatedReviews.reduce((acc, curr) => acc + curr.rating, 0) / updatedReviews.length;\r\n      \r\n      setState(prev => ({\r\n        ...prev,\r\n        reviews: updatedReviews,\r\n        review: \"\",\r\n        rating: 0,\r\n        selectedProduct: {\r\n          ...prev.selectedProduct,\r\n          averageRating: newAverage,\r\n          reviewCount: updatedReviews.length,\r\n        },\r\n      }));\r\n      \r\n      showToast(\"نظر شما با موفقیت ثبت شد\", \"success\");\r\n    } catch (error) {\r\n      showToast(\"خطا در ثبت نظر\", \"error\");\r\n    }\r\n  };\r\n\r\n  const showToast = (message, severity) => {\r\n    setToast({ open: true, message, severity });\r\n  };\r\n\r\n  // Loading state\r\n  if (state.loading) {\r\n    return (\r\n      <ProductContainer>\r\n        <Grid container spacing={4}>\r\n          <Grid item xs={12} md={6}>\r\n            <Skeleton variant=\"rectangular\" width=\"100%\" height={400} sx={{ borderRadius: 2 }} />\r\n            <Box sx={{ display: \"flex\", mt: 2, gap: 2 }}>\r\n              {[0, 1, 2, 3].map((item) => (\r\n                <Skeleton key={item} variant=\"rectangular\" width={80} height={80} sx={{ borderRadius: 1 }} />\r\n              ))}\r\n            </Box>\r\n          </Grid>\r\n          <Grid item xs={12} md={6}>\r\n            <Skeleton variant=\"text\" width=\"60%\" height={50} />\r\n            <Skeleton variant=\"text\" width=\"40%\" height={30} sx={{ mb: 2 }} />\r\n            <Skeleton variant=\"text\" width=\"100%\" height={100} />\r\n            <Skeleton variant=\"rounded\" width={120} height={40} sx={{ mt: 2 }} />\r\n          </Grid>\r\n        </Grid>\r\n      </ProductContainer>\r\n    );\r\n  }\r\n\r\n  // Error state\r\n  if (state.error) {\r\n    return (\r\n      <ProductContainer maxWidth=\"lg\">\r\n        <Alert severity=\"error\" sx={{ mb: 3 }}>\r\n          {state.error}\r\n        </Alert>\r\n        <Button \r\n          variant=\"outlined\" \r\n          startIcon={<ArrowBack />}\r\n          onClick={() => navigate(-1)}\r\n          sx={{ borderRadius: '8px' }}\r\n        >\r\n          بازگشت\r\n        </Button>\r\n      </ProductContainer>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <ProductContainer>\r\n\r\n      <Grid container spacing={4}>\r\n        {/* Product Images Section */}\r\n        <Grid item xs={12} md={6}>\r\n          <ImageGallery \r\n            product={state.selectedProduct}\r\n            currentImageIndex={state.currentImageIndex}\r\n            onImageChange={(index) => setState(prev => ({ ...prev, currentImageIndex: index }))}\r\n            onWishlistToggle={handleWishlistToggle}\r\n            wishlisted={state.wishlisted}\r\n            loadingWishlist={state.loadingWishlist}\r\n          />\r\n\r\n          {/* Product Features */}\r\n          <ProductFeatures />\r\n        </Grid>\r\n\r\n        {/* Product Info Section */}\r\n        <Grid item xs={12} md={6}>\r\n          <Box sx={{ mb: 3 }}>\r\n            {/* Title and Category */}\r\n            <Typography variant=\"h4\" component=\"h1\" gutterBottom fontWeight=\"bold\">\r\n              {state.selectedProduct.name}\r\n            </Typography>\r\n            \r\n            <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 1, mb: 2 }}>\r\n              <Chip\r\n                label={state.selectedProduct.category.name}\r\n                color=\"primary\"\r\n                size=\"small\"\r\n                sx={{ borderRadius: '4px' }}\r\n              />\r\n              <Typography variant=\"caption\" color=\"text.secondary\">\r\n                کد: {state.selectedProduct.sku || \"ندارد\"}\r\n              </Typography>\r\n            </Box>\r\n            \r\n            {/* Rating */}\r\n            <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 1, mb: 3 }}>\r\n              <Rating \r\n                value={state.selectedProduct.averageRating || 0} \r\n                precision={0.5}\r\n                readOnly\r\n                icon={<Star fontSize=\"inherit\" color=\"primary\" />}\r\n                emptyIcon={<StarBorder fontSize=\"inherit\" />}\r\n              />\r\n              <Typography variant=\"body2\" color=\"text.secondary\">\r\n                ({state.selectedProduct.reviewCount || 0} نظر)\r\n              </Typography>\r\n            </Box>\r\n\r\n            {/* Price */}\r\n            <PriceContainer>\r\n              {state.selectedProduct.discount > 0 && (\r\n                <DiscountBadge label={`${state.selectedProduct.discount}% تخفیف`} />\r\n              )}\r\n              <Box>\r\n                {state.selectedProduct.discount > 0 && (\r\n                  <Typography variant=\"body1\" color=\"text.secondary\" sx={{ textDecoration: 'line-through' }}>\r\n                    {state.selectedProduct.price.toLocaleString()} تومان\r\n                  </Typography>\r\n                )}\r\n                <Typography variant=\"h4\" color=\"primary\" fontWeight=\"bold\">\r\n                  {discountedPrice.toLocaleString()} تومان\r\n                </Typography>\r\n              </Box>\r\n            </PriceContainer>\r\n\r\n            {/* Short Description */}\r\n            <Typography variant=\"body1\" color=\"text.secondary\" paragraph>\r\n              {state.selectedProduct.shortDescription || state.selectedProduct.description}\r\n            </Typography>\r\n\r\n            {/* Quantity Selector */}\r\n            <Paper elevation={0} sx={{ p: 3, mb: 3, borderRadius: '12px', bgcolor: 'background.default' }}>\r\n              <Typography variant=\"subtitle1\" gutterBottom fontWeight=\"bold\">\r\n                تعداد:\r\n              </Typography>\r\n              <Stack direction=\"row\" alignItems=\"center\" spacing={2}>\r\n                <IconButton \r\n                  onClick={() => setState(prev => ({ ...prev, quantity: Math.max(1, prev.quantity - 1) }))}\r\n                  disabled={state.quantity <= 1}\r\n                  sx={{ \r\n                    border: `1px solid ${theme.palette.divider}`,\r\n                    borderRadius: '8px',\r\n                  }}\r\n                >\r\n                  <Remove />\r\n                </IconButton>\r\n                <TextField\r\n                  type=\"number\"\r\n                  value={state.quantity}\r\n                  onChange={(e) => {\r\n                    const val = Math.max(1, parseInt(e.target.value) || 1);\r\n                    setState(prev => ({ ...prev, quantity: val }));\r\n                  }}\r\n                  sx={{ width: 80 }}\r\n                  inputProps={{ \r\n                    min: 1, \r\n                    style: { textAlign: \"center\" } \r\n                  }}\r\n                />\r\n                <IconButton \r\n                  onClick={() => setState(prev => ({ ...prev, quantity: prev.quantity + 1 }))}\r\n                  sx={{ \r\n                    border: `1px solid ${theme.palette.divider}`,\r\n                    borderRadius: '8px',\r\n                  }}\r\n                >\r\n                  <Add />\r\n                </IconButton>\r\n              </Stack>\r\n            </Paper>\r\n\r\n            {/* Action Buttons */}\r\n            <Grid container spacing={2} sx={{ mb: 3 }}>\r\n              <Grid item xs={12} sm={6}>\r\n                <ActionButton\r\n                  fullWidth\r\n                  variant=\"contained\"\r\n                  size=\"large\"\r\n                  startIcon={state.loadingAddToCart ? \r\n                    <CircularProgress size={20} color=\"inherit\" /> : \r\n                    <ShoppingCart />}\r\n                  onClick={handleAddToCart}\r\n                  disabled={state.loadingAddToCart}\r\n                >\r\n                  {state.loadingAddToCart ? \"در حال افزودن...\" : \"افزودن به سبد\"}\r\n                </ActionButton>\r\n              </Grid>\r\n              <Grid item xs={12} sm={6}>\r\n                <ActionButton\r\n                  fullWidth\r\n                  variant=\"outlined\"\r\n                  size=\"large\"\r\n                  onClick={() => {\r\n                    handleAddToCart();\r\n                    navigate(\"/checkout\");\r\n                  }}\r\n                >\r\n                  خرید سریع\r\n                </ActionButton>\r\n              </Grid>\r\n            </Grid>\r\n\r\n            {/* Share Buttons */}\r\n            <Paper elevation={0} sx={{ p: 3, borderRadius: '12px', bgcolor: 'background.default' }}>\r\n              <Typography variant=\"subtitle1\" gutterBottom fontWeight=\"bold\">\r\n                اشتراک گذاری:\r\n              </Typography>\r\n              <Stack direction=\"row\" spacing={1} justifyContent=\"center\">\r\n                {[\r\n                  { icon: <Telegram />, color: '#0088cc', name: 'telegram' },\r\n                  { icon: <WhatsApp />, color: '#25D366', name: 'whatsapp' },\r\n                  { icon: <Instagram />, color: '#E1306C', name: 'instagram' },\r\n                  { icon: <Twitter />, color: '#1DA1F2', name: 'twitter' },\r\n                ].map((item) => (\r\n                  <Tooltip key={item.name} title={`اشتراک در ${item.name}`}>\r\n                    <IconButton\r\n                      sx={{ \r\n                        color: item.color,\r\n                        backgroundColor: theme.palette.action.hover,\r\n                        '&:hover': {\r\n                          backgroundColor: theme.palette.action.selected,\r\n                        }\r\n                      }}\r\n                    >\r\n                      {item.icon}\r\n                    </IconButton>\r\n                  </Tooltip>\r\n                ))}\r\n              </Stack>\r\n            </Paper>\r\n          </Box>\r\n\r\n          {/* Product Tabs */}\r\n          <ProductTabs \r\n            activeTab={state.activeTab}\r\n            onTabChange={(newValue) => setState(prev => ({ ...prev, activeTab: newValue }))}\r\n            product={state.selectedProduct}\r\n            reviews={state.reviews}\r\n            rating={state.rating}\r\n            reviewText={state.review}\r\n            onRatingChange={(newValue) => setState(prev => ({ ...prev, rating: newValue }))}\r\n            onReviewChange={(e) => setState(prev => ({ ...prev, review: e.target.value }))}\r\n            onSubmitReview={handleSubmitReview}\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n\r\n      {/* Related Products */}\r\n      {state.relatedProducts.length > 0 && (\r\n        <Box sx={{ mt: 8 }}>\r\n          <Typography variant=\"h5\" gutterBottom fontWeight=\"bold\">\r\n            محصولات مشابه\r\n          </Typography>\r\n          <Grid container spacing={3}>\r\n            {state.relatedProducts.map((product) => (\r\n              <Grid item xs={12} sm={6} md={3} key={product._id}>\r\n                <motion.div \r\n                  whileHover={{ y: -5 }}\r\n                  initial={{ opacity: 0 }}\r\n                  animate={{ opacity: 1 }}\r\n                >\r\n                  <ProductCard product={product} />\r\n                </motion.div>\r\n              </Grid>\r\n            ))}\r\n          </Grid>\r\n        </Box>\r\n      )}\r\n\r\n      {/* Floating Action Button for Mobile */}\r\n      {isMobile && (\r\n        <Fab\r\n          color=\"primary\"\r\n          sx={{ \r\n            position: 'fixed', \r\n            bottom: 24, \r\n            right: 24,\r\n            zIndex: 1000\r\n          }}\r\n          onClick={handleAddToCart}\r\n          disabled={state.loadingAddToCart}\r\n        >\r\n          {state.loadingAddToCart ? (\r\n            <CircularProgress size={24} color=\"inherit\" />\r\n          ) : (\r\n            <Badge badgeContent={state.quantity} color=\"secondary\">\r\n              <ShoppingCart />\r\n            </Badge>\r\n          )}\r\n        </Fab>\r\n      )}\r\n\r\n      {/* Notification */}\r\n      <Snackbar\r\n        open={toast.open}\r\n        autoHideDuration={3000}\r\n        onClose={() => setToast(prev => ({ ...prev, open: false }))}\r\n        anchorOrigin={{ vertical: \"bottom\", horizontal: \"left\" }}\r\n        TransitionComponent={Slide}\r\n      >\r\n        <Alert \r\n          severity={toast.severity} \r\n          sx={{ width: \"100%\" }}\r\n          onClose={() => setToast(prev => ({ ...prev, open: false }))}\r\n        >\r\n          {toast.message}\r\n        </Alert>\r\n      </Snackbar>\r\n    </ProductContainer>\r\n  );\r\n}\r\n\r\nexport default React.memo(ProductPage); \r\n"],"names":["formatPrice","price","parsedPrice","parseFloat","Intl","NumberFormat","format","ProductCard","_ref","_product$likes","_product$likes2","_product$price","_product$images","_product$category","_product$subCategory","product","loading","ClassName","dispatch","useDispatch","navigate","useNavigate","theme","useTheme","isMobile","useMediaQuery","breakpoints","down","user","token","useSelector","state","auth","cartItems","selectCartItems","cartLoading","cart","cartLoadingStates","_id","imageError","setImageError","products","loadingStates","useState","isAnimating","setIsAnimating","localCartState","setLocalCartState","isInCart","quantity","item","isFavorite","likes","includes","id","likeCount","length","productPrice","$numberDecimal","useEffect","cartItem","find","_item$product","handleLike","useCallback","async","e","stopPropagation","toggleLike","productId","userId","isCurrentlyLiked","unwrap","error","console","handleAddToCart","preventDefault","prev","concat","Date","now","priceAtAddition","addItemToCart","_objectSpread","Math","max","handleDecreaseQuantity","handleRemoveItem","removeItemFromCart","renderStockStatus","stock","parseInt","_jsx","Chip","label","size","color","sx","mr","mb","handleImageError","handleCardClick","_jsxs","CardActionArea","className","skeletonStyles","children","Skeleton","variant","height","CardContent","width","totalPrice","cardStyles","onClick","Tooltip","title","IconButton","favoriteButtonStyles","Typography","component","ml","FavoriteIcon","favoriteIconStyles","FavoriteBorderIcon","imageContainerStyles","CardMedia","src","_default","Api_Url","images","alt","name","imageStyles","onError","placeholder","contentStyles","titleStyles","Box","mt","category","subCategory","cartSectionStyles","priceStyles","cartControlsStyles","disabled","cartIconStyles","Delete","fontSize","RemoveIcon","quantityStyles","AddIcon","addToCartButtonStyles","ShoppingCartIcon","padding","totalPriceStyles","position","borderRadius","maxHeight","boxShadow","display","xs","sm","flexDirection","transition","transform","background","top","right","zIndex","alignItems","objectFit","flexGrow","justifyContent","fontWeight","overflow","textOverflow","WebkitLineClamp","WebkitBoxOrient","p","gap","alignSelf","m","backgroundColor","minWidth","textAlign","memo","ImageGallery","currentImageIndex","onImageChange","onWishlistToggle","wishlisted","loadingWishlist","CircularProgress","Favorite","FavoriteBorder","motion","img","style","cursor","initial","opacity","animate","duration","overflowX","map","index","div","border","whileHover","scale","React","ProductFeatures","features","icon","LocalShipping","desc","VerifiedUser","SupportAgent","Payment","Grid","container","spacing","feature","Paper","elevation","ProductTabs","activeTab","onTabChange","reviews","rating","reviewText","onRatingChange","onReviewChange","onSubmitReview","bgcolor","Tabs","value","onChange","newValue","Tab","paragraph","fullDescription","description","review","Avatar","charAt","Rating","readOnly","date","toLocaleDateString","comment","Divider","gutterBottom","precision","Star","emptyIcon","StarBorder","TextField","fullWidth","multiline","rows","Button","startIcon","ThumbUp","viewProduct","api","post","headers","Authorization","data","fetchReviews","get","ProductContainer","styled","Container","paddingTop","paddingBottom","PriceContainer","margin","DiscountBadge","_ref2","palette","light","contrastText","ActionButton","_ref3","shadows","ProductPage","useParams","setState","selectedProduct","relatedProducts","loadingAddToCart","toast","setToast","open","message","severity","discountedPrice","useMemo","_state$selectedProduc","_state$selectedProduc2","discount","round","loadProduct","fetchProducts","Promise","all","catch","filter","slice","averageRating","localStorage","getItem","showToast","from","addToCart","md","maxWidth","Alert","ArrowBack","likeProduct","sku","reviewCount","textDecoration","toLocaleString","shortDescription","Stack","direction","divider","Remove","type","val","target","inputProps","min","Add","ShoppingCart","Telegram","WhatsApp","Instagram","Twitter","action","hover","selected","newReview","reviewData","submitReview","updatedReviews","newAverage","reduce","acc","curr","y","Fab","bottom","Badge","badgeContent","Snackbar","autoHideDuration","onClose","anchorOrigin","vertical","horizontal","TransitionComponent","Slide"],"sourceRoot":""}