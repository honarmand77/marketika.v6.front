"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[270],{3583:(i,n,t)=>{t.d(n,{A:()=>e});t(65043);const e=t.p+"static/media/marketika defullt.7ba899dccbc85f4ffaadd4300f6c1069.svg"},10911:(i,n,t)=>{t.d(n,{Ar:()=>p,Ev:()=>x,eq:()=>m,nA:()=>u});var e,a,l,d,o,s=t(57528),r=t(1529);const c=(0,r.i7)(e||(e=(0,s.A)(["\n  from { opacity: 0; }\n  to { opacity: 1; }\n"]))),x=r.Ay.div(a||(a=(0,s.A)(["\n  display: grid;\n  gap: 1rem;\n  grid-template-columns: repeat( auto-fit, minmax(580px, 1fr) );\n  width:100%;\n  padding:1vw;\n  background:linear-gradient(to top, #52575D10, transparent);\n  @media (max-width: 768px) {\npadding:0;\ngrid-template-columns: 1fr;\nwidth:100vw;\ngap: 0;\n\n  }\n"]))),u=r.Ay.div(l||(l=(0,s.A)(["\n  border-radius: 10px;\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\n  animation: ",' 0.5s ease-out;\n  height:max-content;\n  padding: .5rem .5rem;\n  width:100%;\n  height:max-content;\n\n\n  *{\n  font-family: "yekan";\n  }\n\n  @media (max-width: 1050px) {\n  border:none;\n\n  }\n\n@media (max-width: 768px) {\n  width:100vw;\n  padding: 0;\n\n  }\n\n'])),c),p=r.Ay.div(d||(d=(0,s.A)(["\n  width:max-content;\n  display:flex;\n  height: 100%;\n  align-items:center;\n  justify-content:center;\n  gap:5px;\n\n  @media (max-width: 768px) {\n  grid-template-rows: 1fr;\n  grid-template-columns: 1fr 1fr;\n\n  }\n\n"]))),m=r.Ay.div(o||(o=(0,s.A)(["\n  width:100%;\n  display:flex;\n  height: 100%;\n  flex-wrap:wrap;\n  align-items:center;\n  justify-content:center;\n  gap:5px;\n  padding:5px;\n\n  @media (max-width: 768px) {\n  display:grid;\n  grid-template-rows: 1fr;\n  grid-template-columns: 1fr 1fr;\n    padding:5px;\n  }\n\n"])))},20326:(i,n,t)=>{t.d(n,{A:()=>U});var e=t(89379),a=t(65043),l=t(26240),d=t(54552),o=t(43845),s=t(2828),r=t(78185),c=t(26494),x=t(77739),u=t(17392),p=t(94496),m=t(36591),h=t(30815),v=t(15244),f=t(77466),g=t(51387),A=t(48920),b=t(70141),y=t(99010),j=t(3583),w=t(73216),C=t(33943),k=t(83003),I=t(84589),q=t(40884),S=t(70579);const z=i=>{const n="number"===typeof i?i:parseFloat(i)||0;return new Intl.NumberFormat("fa-IR").format(n)+" \u062a\u0648\u0645\u0627\u0646"},D=i=>{var n,t,D,U,Y,$;let{product:J,loading:K,ClassName:Q}=i;const V=(0,k.wA)(),X=(0,w.Zp)(),ii=(0,l.A)(),ni=(0,d.A)(ii.breakpoints.down("sm")),{user:ti,token:ei}=(0,k.d4)((i=>i.auth)),ai=(0,k.d4)(q.selectCartItems),li=(0,k.d4)((i=>i.cart.cartLoadingStates[null===J||void 0===J?void 0:J._id]||!1)),[di,oi]=((0,k.d4)((i=>i.products.loadingStates[null===J||void 0===J?void 0:J._id]||!1)),(0,a.useState)(!1)),[si,ri]=(0,a.useState)(!1),[ci,xi]=(0,a.useState)({isInCart:!1,quantity:0,item:null}),ui=(null===J||void 0===J||null===(n=J.likes)||void 0===n?void 0:n.includes(null===ti||void 0===ti?void 0:ti.id))||!1,pi=(null===J||void 0===J||null===(t=J.likes)||void 0===t?void 0:t.length)||0,mi=parseFloat((null===J||void 0===J||null===(D=J.price)||void 0===D?void 0:D.$numberDecimal)||(null===J||void 0===J?void 0:J.price)||0);(0,a.useEffect)((()=>{const i=ai.find((i=>{var n;return(null===i||void 0===i||null===(n=i.product)||void 0===n?void 0:n._id)===(null===J||void 0===J?void 0:J._id)}));xi({isInCart:!!i,quantity:(null===i||void 0===i?void 0:i.quantity)||0,item:i||null})}),[ai,null===J||void 0===J?void 0:J._id]);const hi=(0,a.useCallback)((async i=>{if(i.stopPropagation(),ri(!0),ei){try{await V((0,I.GB)({productId:null===J||void 0===J?void 0:J._id,userId:null===ti||void 0===ti?void 0:ti.id,isCurrentlyLiked:ui})).unwrap()}catch(n){console.error("\u062e\u0637\u0627 \u062f\u0631 \u0639\u0645\u0644\u06cc\u0627\u062a \u0644\u0627\u06cc\u06a9:",n)}ri(!1)}else X("/auth")}),[null===J||void 0===J?void 0:J._id,null===ti||void 0===ti?void 0:ti.id,ei,X,ui,V]),vi=(0,a.useCallback)((async i=>{if(i.stopPropagation(),i.preventDefault(),!ei)return X("/auth");if(!li){xi((i=>({isInCart:!0,quantity:i.quantity+1,item:i.item||{_id:"temp-".concat(Date.now()),product:J,quantity:i.quantity+1,priceAtAddition:mi}})));try{await V((0,q.addItemToCart)({userId:null===ti||void 0===ti?void 0:ti.id,productId:null===J||void 0===J?void 0:J._id,quantity:1})).unwrap()}catch(n){xi((i=>(0,e.A)((0,e.A)({},i),{},{isInCart:i.quantity>0,quantity:Math.max(0,i.quantity),item:i.quantity>0?i.item:null}))),console.error("\u062e\u0637\u0627 \u062f\u0631 \u0627\u0641\u0632\u0648\u062f\u0646 \u0628\u0647 \u0633\u0628\u062f \u062e\u0631\u06cc\u062f:",n)}}}),[J,null===ti||void 0===ti?void 0:ti.id,ei,X,V,li,mi]),fi=(0,a.useCallback)((async i=>{if(i.stopPropagation(),i.preventDefault(),ei&&!li){xi((i=>(0,e.A)((0,e.A)({},i),{},{quantity:Math.max(0,i.quantity-1),isInCart:i.quantity>1})));try{await V((0,q.addItemToCart)({userId:null===ti||void 0===ti?void 0:ti.id,productId:null===J||void 0===J?void 0:J._id,quantity:-1})).unwrap()}catch(n){xi((i=>(0,e.A)((0,e.A)({},i),{},{quantity:i.quantity+1,isInCart:!0}))),console.error("\u062e\u0637\u0627 \u062f\u0631 \u06a9\u0627\u0647\u0634 \u062a\u0639\u062f\u0627\u062f \u0645\u062d\u0635\u0648\u0644:",n)}}}),[null===J||void 0===J?void 0:J._id,null===ti||void 0===ti?void 0:ti.id,ei,V,li]),gi=(0,a.useCallback)((async i=>{if(i.stopPropagation(),i.preventDefault(),ei&&!li&&ci.item){xi({isInCart:!1,quantity:0,item:null});try{await V((0,q.removeItemFromCart)(ci.item._id)).unwrap()}catch(n){xi({isInCart:!0,quantity:ci.quantity,item:ci.item}),console.error("\u062e\u0637\u0627 \u062f\u0631 \u062d\u0630\u0641 \u0645\u062d\u0635\u0648\u0644:",n)}}}),[ci,V,li,ei]),Ai=(0,a.useCallback)((()=>{const i=parseInt((null===J||void 0===J?void 0:J.stock)||0);return i<=0?(0,S.jsx)(o.A,{label:"\u0646\u0627\u0645\u0648\u062c\u0648\u062f",size:"small",color:"error",sx:{mr:1,mb:1}}):i<5?(0,S.jsx)(o.A,{label:"\u062a\u0646\u0647\u0627 ".concat(i," \u0639\u062f\u062f \u0628\u0627\u0642\u06cc \u0645\u0627\u0646\u062f\u0647"),size:"small",color:"warning",sx:{mr:1,mb:1}}):null}),[null===J||void 0===J?void 0:J.stock]),bi=(0,a.useCallback)((()=>oi(!0)),[]),yi=(0,a.useCallback)((()=>{X("/productPage/".concat(null===J||void 0===J?void 0:J._id))}),[null===J||void 0===J?void 0:J._id,X]);if(K)return(0,S.jsxs)(s.A,{className:"card ".concat(Q),sx:_,children:[(0,S.jsx)(r.A,{variant:"rectangular",height:200}),(0,S.jsxs)(c.A,{children:[(0,S.jsx)(r.A,{variant:"text",width:"60%"}),(0,S.jsx)(r.A,{variant:"text"}),(0,S.jsx)(r.A,{variant:"text",width:"40%"})]})]});const ji=ci.item?ci.item.priceAtAddition*ci.quantity:mi*ci.quantity;return(0,S.jsxs)(s.A,{className:"Card ".concat(Q),sx:W,onClick:yi,children:[(0,S.jsx)(x.A,{title:ui?"\u062d\u0630\u0641 \u0627\u0632 \u0639\u0644\u0627\u0642\u0647\u200c\u0645\u0646\u062f\u06cc\u200c\u0647\u0627":"\u0627\u0641\u0632\u0648\u062f\u0646 \u0628\u0647 \u0639\u0644\u0627\u0642\u0647\u200c\u0645\u0646\u062f\u06cc\u200c\u0647\u0627",children:(0,S.jsxs)(u.A,{"aria-label":"toggle favorite",onClick:hi,sx:N,children:[(0,S.jsx)(p.A,{variant:"body2",component:"div",sx:{ml:.5},children:pi}),ui?(0,S.jsx)(v.A,{sx:R(si)}):(0,S.jsx)(f.A,{})]})}),(0,S.jsx)(s.A,{className:"img",sx:F,children:(0,S.jsx)(m.A,{component:"img",height:ni?"150px":"200px",src:di?j.A:"".concat(C.T,"/").concat(null===J||void 0===J||null===(U=J.images)||void 0===U?void 0:U[0]),alt:null===J||void 0===J?void 0:J.name,sx:E,onError:bi,placeholder:"blur",loading:"lazy"})}),(0,S.jsxs)(c.A,{sx:P,children:[(0,S.jsx)(p.A,{variant:"body2",component:"div",sx:L,children:(null===J||void 0===J?void 0:J.name)||"\u0628\u062f\u0648\u0646 \u0639\u0646\u0648\u0627\u0646"}),(0,S.jsxs)(h.A,{sx:{mt:1},children:[Ai(),(0,S.jsx)(o.A,{label:"".concat((null===J||void 0===J||null===(Y=J.category)||void 0===Y?void 0:Y.name)||"\u0628\u062f\u0648\u0646 \u062f\u0633\u062a\u0647\u200c\u0628\u0646\u062f\u06cc"),size:"small",sx:{mr:1,mb:1}}),(0,S.jsx)(o.A,{label:"".concat((null===J||void 0===J||null===($=J.subCategory)||void 0===$?void 0:$.name)||"\u0628\u062f\u0648\u0646 \u062f\u0633\u062a\u0647\u200c\u0628\u0646\u062f\u06cc"),size:"small",sx:{mr:1,mb:1}})]}),(0,S.jsxs)(h.A,{sx:T,children:[(0,S.jsx)(p.A,{variant:"body2",sx:B,children:z(mi)}),ci.isInCart?(0,S.jsxs)(h.A,{sx:Z,children:[(0,S.jsx)(u.A,{"aria-label":"\u062d\u0630\u0641 \u0645\u062d\u0635\u0648\u0644",onClick:gi,disabled:li,size:"small",sx:G,children:(0,S.jsx)(g.A,{fontSize:"small"})}),(0,S.jsx)(u.A,{"aria-label":"\u06a9\u0627\u0647\u0634 \u062a\u0639\u062f\u0627\u062f",onClick:fi,disabled:li||ci.quantity<=1,size:"small",sx:G,children:(0,S.jsx)(A.A,{fontSize:"small"})}),(0,S.jsx)(p.A,{variant:"body2",sx:M,children:ci.quantity}),(0,S.jsx)(u.A,{"aria-label":"\u0627\u0641\u0632\u0627\u06cc\u0634 \u062a\u0639\u062f\u0627\u062f",onClick:vi,disabled:li,size:"small",sx:G,children:(0,S.jsx)(b.A,{fontSize:"small"})})]}):(0,S.jsx)(x.A,{title:"\u0627\u0641\u0632\u0648\u062f\u0646 \u0628\u0647 \u0633\u0628\u062f \u062e\u0631\u06cc\u062f",children:(0,S.jsx)(u.A,{"aria-label":"\u0627\u0641\u0632\u0648\u062f\u0646 \u0628\u0647 \u0633\u0628\u062f \u062e\u0631\u06cc\u062f",onClick:vi,disabled:li,sx:H,children:(0,S.jsx)(y.A,{fontSize:"medium",sx:{padding:"2px"}})})}),ci.isInCart&&(0,S.jsx)(p.A,{variant:"body2",sx:O,children:z(ji)})]})]})]})},_={position:"relative",height:400,width:250,borderRadius:"0px"},W={position:"relative",maxHeight:"max-content",boxShadow:"none",padding:"5px",display:"flex",width:{xs:"100%",sm:"250px"},flexDirection:"column",transition:"transform 0.2s, box-shadow 0.2s","&:hover":{transform:"translateY(-4px)",background:"#52575D",">:nth-child(3)":{"*":{color:"#fff"}}}},N={position:"absolute",top:1,right:1,zIndex:1,color:"#fff",display:"flex",alignItems:"center",padding:"5px 10px",background:"#52575D",borderRadius:"5px"},R=i=>({transform:i?"scale(1.1)":"scale(1)",transition:".5s ease",color:i?"#ff4081":"inherit"}),F={background:"#fff",borderRadius:"8px"},E={objectFit:"contain",padding:"5px"},P={flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"space-between",padding:"5px",width:"100%"},L={mb:1,fontWeight:600,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:1,WebkitBoxOrient:"vertical"},T={mt:2,display:"flex",flexDirection:"column"},B={p:1,color:"#52575D",fontWeight:"bold"},Z={display:"flex",alignItems:"center",gap:.5,background:"#52575D",borderRadius:"20px",padding:"5px 10px",color:"#fff",alignSelf:"flex-end",m:1},G={color:"#fff",padding:"4px","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.1)"}},M={minWidth:"20px",textAlign:"center",fontWeight:"bold"},O={alignSelf:"flex-end",fontSize:"0.8rem",color:"#666",mt:.5},H={p:1,color:"#fff",background:"#52575D",alignSelf:"flex-end","&:hover":{background:"#52575D"},"&:disabled":{background:"#e0e0e0",color:"#9e9e9e"}},U=(0,a.memo)(D)},44270:(i,n,t)=>{t.r(n),t.d(n,{default:()=>N});var e=t(65043),a=t(83003),l=t(73216),d=t(40884),o=t(26240),s=t(54552),r=t(12110),c=t(26494),x=t(81045),u=t(94496),p=t(30815),m=t(11906),h=t(85381),v=t(83625),f=t(24056),g=t(68903),A=t(61596),b=t(81637),y=t(99010),j=t(39887),w=t(76427),C=t(47805),k=t(51387),I=t(92815),q=t(20326),S=t(68831),z=t(10911),D=t(70579);const _=(0,e.memo)((i=>{let{isAuthenticated:n}=i;const t=(0,l.Zp)(),e=(0,o.A)(),a=(0,s.A)(e.breakpoints.down("sm"));return(0,D.jsx)(r.A,{className:"AuthStep",sx:{width:a?"100%":"500px",mx:"auto",mt:4,boxShadow:0},children:(0,D.jsxs)(c.A,{sx:{textAlign:"center",p:4},children:[(0,D.jsx)(x.A,{sx:{bgcolor:"secondary.light",width:80,height:80,mx:"auto",mb:3},children:(0,D.jsx)(y.A,{sx:{fontSize:40}})}),(0,D.jsx)(u.A,{variant:"h5",gutterBottom:!0,sx:{fontWeight:"bold",mb:2},children:n?"\u0633\u0628\u062f \u062e\u0631\u06cc\u062f \u0634\u0645\u0627 \u062e\u0627\u0644\u06cc \u0627\u0633\u062a":"\u0628\u0631\u0627\u06cc \u0645\u0634\u0627\u0647\u062f\u0647 \u0633\u0628\u062f \u062e\u0631\u06cc\u062f \u0648\u0627\u0631\u062f \u0634\u0648\u06cc\u062f"}),(0,D.jsx)(u.A,{variant:"body1",color:"text.secondary",sx:{mb:4},children:n?"\u0645\u062d\u0635\u0648\u0644\u0627\u062a \u0645\u0648\u0631\u062f \u0646\u0638\u0631 \u062e\u0648\u062f \u0631\u0627 \u0628\u0647 \u0633\u0628\u062f \u062e\u0631\u06cc\u062f \u0627\u0636\u0627\u0641\u0647 \u06a9\u0646\u06cc\u062f":"\u0644\u0637\u0641\u0627\u064b \u0628\u0631\u0627\u06cc \u0645\u0634\u0627\u0647\u062f\u0647 \u0648 \u0645\u062f\u06cc\u0631\u06cc\u062a \u0633\u0628\u062f \u062e\u0631\u06cc\u062f \u062e\u0648\u062f \u0648\u0627\u0631\u062f \u062d\u0633\u0627\u0628 \u06a9\u0627\u0631\u0628\u0631\u06cc \u0634\u0648\u06cc\u062f"}),(0,D.jsxs)(p.A,{sx:{display:"flex",justifyContent:"center",flexDirection:"column",gap:2},children:[(0,D.jsx)(m.A,{variant:"contained",size:"large",startIcon:(0,D.jsx)(j.A,{}),onClick:()=>t("/shop"),sx:{minWidth:180,display:"flex",gap:"5px",color:"#fff",boxShadow:0,background:" #52575D"},children:"\u0645\u0634\u0627\u0647\u062f\u0647 \u0645\u062d\u0635\u0648\u0644\u0627\u062a"}),!n&&(0,D.jsx)(m.A,{variant:"outlined",size:"large",startIcon:(0,D.jsx)(w.A,{}),onClick:()=>t("/auth"),sx:{minWidth:180,display:"flex",gap:"5px"},children:"\u0648\u0631\u0648\u062f \u0628\u0647 \u062d\u0633\u0627\u0628"})]})]})})})),W=()=>{const i=(0,a.wA)(),n=(0,l.Zp)(),t=((0,a.d4)((i=>i.products.products)),(0,a.d4)(d.selectCartItems)),r=(0,a.d4)(d.selectCartTotalPrice),c=(0,a.d4)(d.selectCartItemCount),x=(0,a.d4)(d.selectCartStatus),y=(0,a.d4)((i=>!!i.auth)),{user:j}=(0,a.d4)((i=>i.auth)),w=(0,o.A)(),W=(0,s.A)(w.breakpoints.down("sm")),N="loading"===x,R=(0,e.useCallback)((async()=>{try{await i((0,d.clearUserCart)({userId:null===j||void 0===j?void 0:j.id}))}catch(n){console.error("Error clearing cart:",n)}}),[i,null===j||void 0===j?void 0:j.id]),F=(0,e.useCallback)((async()=>{try{await i((0,d.fetchCart)(null===j||void 0===j?void 0:j.id))}catch(n){console.error("Error refreshing cart:",n)}}),[i,null===j||void 0===j?void 0:j.id]),E=(0,e.useCallback)((()=>{n("/checkout")}),[n]);return(0,e.useEffect)((()=>{y&&i((0,d.fetchCart)(null===j||void 0===j?void 0:j.id))}),[i,y,null===j||void 0===j?void 0:j.id]),y?0===c?(0,D.jsx)(h.A,{sx:{py:4},children:(0,D.jsx)(_,{isAuthenticated:!0})}):(0,D.jsx)(S.N,{className:"scroller",children:(0,D.jsxs)(p.A,{sx:{width:"100vw",padding:"5px",margin:"0",maxWidth:"100vw",display:"flex",alignItems:"flex-start",flexDirection:"column"},children:[(0,D.jsxs)(p.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:2,width:"100%"},children:[(0,D.jsx)(v.A,{sx:{width:"max-content"},value:"\u0633\u0628\u062f \u062e\u0631\u06cc\u062f \u0634\u0645\u0627 (".concat(c.toLocaleString("fa-IR"),")"),children:(0,D.jsx)(f.A,{label:"\u0633\u0628\u062f \u062e\u0631\u06cc\u062f \u0634\u0645\u0627 (".concat(c.toLocaleString("fa-IR"),")")})}),(0,D.jsx)(m.A,{variant:"outlined",startIcon:(0,D.jsx)(C.A,{}),onClick:F,disabled:N,sx:{display:"flex",gap:"5px"},children:"\u0628\u0647\u200c\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06cc"})]}),(0,D.jsx)(g.Ay,{item:!0,xs:12,children:(0,D.jsx)(z.eq,{container:!0,spacing:2,children:t.map((i=>(0,D.jsx)(q.A,{product:i.product,loading:N})))})}),(0,D.jsx)(A.A,{sx:{boxShadow:0,p:1,width:"100%",background:"#fcfcfc",position:"fixed",bottom:W?"50px":"0",zIndex:999},children:(0,D.jsxs)(p.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:2},children:[(0,D.jsxs)(p.A,{children:[(0,D.jsxs)(u.A,{variant:"h6",sx:{fontWeight:"bold"},children:["\u062c\u0645\u0639 \u06a9\u0644: ",(P=r,"number"!==typeof P&&(P=parseFloat(P)||0),new Intl.NumberFormat("fa-IR").format(P)+" \u062a\u0648\u0645\u0627\u0646")]}),(0,D.jsx)(u.A,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"\u0647\u0632\u06cc\u0646\u0647 \u0627\u0631\u0633\u0627\u0644 \u062f\u0631 \u0645\u0631\u062d\u0644\u0647 \u067e\u0631\u062f\u0627\u062e\u062a \u0645\u062d\u0627\u0633\u0628\u0647 \u0645\u06cc\u200c\u0634\u0648\u062f"})]}),(0,D.jsxs)(p.A,{sx:{display:"flex",gap:2},children:[(0,D.jsx)(m.A,{variant:"outlined",color:"error",startIcon:(0,D.jsx)(k.A,{}),onClick:R,disabled:N,sx:{display:"flex",gap:"5px"},children:"\u062e\u0627\u0644\u06cc \u06a9\u0631\u062f\u0646"}),(0,D.jsx)(m.A,{variant:"contained",size:"large",startIcon:(0,D.jsx)(I.A,{}),onClick:E,disabled:N,sx:{minWidth:200,height:50,display:"flex",gap:"5px",color:"#fff",boxShadow:0},children:N?(0,D.jsx)(b.A,{size:24}):"\u062a\u06a9\u0645\u06cc\u0644 \u0633\u0641\u0627\u0631\u0634"})]})]})})]})}):(0,D.jsx)(h.A,{sx:{py:4},children:(0,D.jsx)(_,{isAuthenticated:!1})});var P},N=(0,e.memo)(W)},68831:(i,n,t)=>{t.d(n,{N:()=>l});var e,a=t(57528);const l=t(1529).Ay.div(e||(e=(0,a.A)(["\n  width: 100%;\n  display: grid;\n  align-items:flex-start;\n  justify-content:center;\n  margin:0;\n  height: calc(100dvh - 10px);\n  padding-bottom:150px;\n  z-index:1001;\n  @media (max-width: 768px) {\n    height: calc(100dvh - 100px);\n\n  }\n\n"])))}}]);
//# sourceMappingURL=270.dec0ba93.chunk.js.map